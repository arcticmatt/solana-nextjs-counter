# solana-nextjs-counter

A simple Solana program + frontend. There is a global counter, and everyone is able to increment it once.

Adapted from https://github.com/arcticmatt/solana-nextjs.

## Deployment

### localhost

1. `solana config set --url localhost`
2. Modify network in `Anchor.toml`
3. `anchor build`
4. `node copyIdl`
5. Update program IDs in `Anchor.toml` and `lib.rs`
6. `solana-test-validator`
7. `anchor deploy`
8. Update `ConnectionEndpoint`
8. Update network settings in Phantom wallet


## Useful Commands

### Run tests 

```
anchor test
```

### Get program ID

```
$ solana address -k target/deploy/solana_nextjs_counter-keypair.json
bznhrZuksQzrY6fw3pb86HLFpg86zjngQ7nTiAF4QXv
```

Make sure to use this in `lib.rs` and `Anchor.toml`.

### Copy idl

Copies `./target/idl/solana_nextjs_counter.json` (generated by running `anchor build`) to `./app/src/idl.json`.

```
$ node copyIdl
```
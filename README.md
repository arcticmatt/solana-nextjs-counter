# solana-nextjs-counter

A simple Solana program + frontend. There is a global counter, and everyone is able to increment it.

Check out the live app at https://solana-nextjs-counter.vercel.app/ (it's on devnet).

Adapted from https://github.com/arcticmatt/solana-nextjs.

## Building

1. `anchor build`
2. `anchor test` (this populates `metadata` in the IDL file)
3. `node copyIdl`
4. `solana address -k target/deploy/solana_nextjs_counter-keypair.json`
5. Update program IDs in `Anchor.toml` and `lib.rs`

## Deployment

1. `solana config set --url localhost/devnet/mainnet`
2. Modify network in `Anchor.toml`
3. `solana-test-validator` (only for `localhost`)
4. `anchor deploy`
5. Update `ConnectionEndpoint`
6. Update network settings in Phantom wallet

## Useful Commands

### Run tests 

```
anchor test
```

### Get program ID

```
$ solana address -k target/deploy/solana_nextjs_counter-keypair.json
bznhrZuksQzrY6fw3pb86HLFpg86zjngQ7nTiAF4QXv
```

Make sure to use this in `lib.rs` and `Anchor.toml`.

### Copy idl

Copies `./target/idl/solana_nextjs_counter.json` (generated by running `anchor build`) to `./app/src/idl.json`.

```
$ node copyIdl
```